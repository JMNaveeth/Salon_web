<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Kinniya Salon</title>
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="admin.html"><h2>Kinniya Salon</h2></a>
            </div>
            <div class="nav-menu" style="display: flex; gap: 15px; align-items: center;">
                <button onclick="AuthSystem.logout()" style="background: transparent; border: 2px solid var(--primary); color: var(--primary); padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 14px;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Admin Header -->
    <section class="admin-header">
        <div class="container">
            <div class="admin-header-content">
                <h1><i class="fas fa-cog"></i> Admin Panel</h1>
                <p>Manage bookings, services, and salon operations</p>
                
                <!-- Quick Action Buttons -->
                <div class="quick-actions">
                    <button class="action-btn" id="btnAddService">
                        <i class="fas fa-plus-circle"></i>
                        Add Service
                    </button>
                    <button class="action-btn" id="btnAddStaff">
                        <i class="fas fa-user-plus"></i>
                        Add Staff
                    </button>
                    <button class="action-btn" id="btnAddPhoto">
                        <i class="fas fa-camera"></i>
                        Add Customer Photo
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Dashboard -->
    <section class="admin-section">
        <div class="container">
            <div class="admin-layout">
                <!-- Sidebar -->
                <div class="admin-sidebar">
                    <div class="sidebar-menu">
                        <a href="#overview" class="sidebar-link active" data-section="overview">
                            <i class="fas fa-tachometer-alt"></i>
                            Overview
                        </a>
                        <a href="#analytics" class="sidebar-link" data-section="analytics">
                            <i class="fas fa-chart-bar"></i>
                            Analytics
                        </a>
                        <a href="#bookings" class="sidebar-link" data-section="bookings">
                            <i class="fas fa-calendar-check"></i>
                            Bookings
                        </a>
                        <a href="#services" class="sidebar-link" data-section="services">
                            <i class="fas fa-concierge-bell"></i>
                            Services
                        </a>
                        <a href="#settings" class="sidebar-link" data-section="settings">
                            <i class="fas fa-cogs"></i>
                            Settings
                        </a>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="admin-main">
                    <!-- Overview -->
                    <div id="overview-section" class="admin-content active">
                        <div class="content-header">
                            <h2>Dashboard Overview</h2>
                        </div>

                        <!-- Stats Cards -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-day"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="todayBookings">0</div>
                                    <div class="stat-label">Today's Bookings</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="upcomingBookings">0</div>
                                    <div class="stat-label">Upcoming</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="totalRevenue">$0</div>
                                    <div class="stat-label">Revenue</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="totalCustomers">0</div>
                                    <div class="stat-label">Customers</div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="recent-activity">
                            <h3>Recent Activity</h3>
                            <div class="activity-list" id="recentActivity">
                                <p style="color: #999; text-align: center; padding: 20px;">No recent activity</p>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Section -->
                    <div id="analytics-section" class="admin-content">
                        <div class="content-header">
                            <h2>Analytics</h2>
                        </div>
                        <p style="color: #999;">Analytics data will be displayed here.</p>
                    </div>

                    <!-- Bookings Section -->
                    <div id="bookings-section" class="admin-content">
                        <div class="content-header">
                            <h2>Bookings</h2>
                        </div>
                        <p style="color: #999;">Bookings data will be displayed here.</p>
                    </div>

                    <!-- Services Section -->
                    <div id="services-section" class="admin-content">
                        <div class="content-header">
                            <h2>Services Management</h2>
                            <button class="btn btn-primary" id="btnAddServiceFromList">
                                <i class="fas fa-plus-circle"></i> Add New Service
                            </button>
                        </div>
                        
                        <!-- Services List -->
                        <div class="services-container">
                            <div class="services-grid" id="servicesGrid">
                                <!-- Services will be loaded here -->
                            </div>
                            <div class="empty-state" id="servicesEmpty" style="display: none;">
                                <i class="fas fa-concierge-bell"></i>
                                <h3>No Services Added Yet</h3>
                                <p>Start by adding your first service to the system</p>
                                <button class="btn btn-primary" onclick="document.getElementById('btnAddService').click()">
                                    <i class="fas fa-plus-circle"></i> Add Service
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div id="settings-section" class="admin-content">
                        <div class="content-header">
                            <h2>Settings</h2>
                        </div>
                        <p style="color: #999;">Settings will be displayed here.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Service Modal -->
    <div id="addServiceModal" class="admin-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plus-circle"></i> Add New Service</h3>
                <button class="modal-close" id="closeService">&times;</button>
            </div>
            <div class="modal-body">
                <form id="serviceModalForm">
                    <div class="form-group">
                        <label for="modalServiceName">Service Name *</label>
                        <input type="text" id="modalServiceName" required placeholder="e.g., Hair Styling">
                    </div>
                    <div class="form-group">
                        <label for="modalServiceCategory">Category *</label>
                        <select id="modalServiceCategory" required>
                            <option value="">Select category</option>
                            <option value="hair">Hair Services</option>
                            <option value="facial">Facial Services</option>
                            <option value="special">Special (Wedding/Fashion)</option>
                            <option value="others">Other Services</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalServicePrice">Price ($) *</label>
                            <input type="number" id="modalServicePrice" step="0.01" required placeholder="50.00">
                        </div>
                        <div class="form-group">
                            <label for="modalServiceDuration">Duration (min) *</label>
                            <input type="number" id="modalServiceDuration" required placeholder="60">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modalServiceDescription">Description</label>
                        <textarea id="modalServiceDescription" rows="3" placeholder="Describe the service..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" id="cancelService">Cancel</button>
                <button type="button" class="btn btn-save" id="saveServiceBtn">Save Service</button>
            </div>
        </div>
    </div>

    <!-- Add Staff Modal -->
    <div id="addStaffModal" class="admin-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Add New Staff</h3>
                <button class="modal-close" id="closeStaff">&times;</button>
            </div>
            <div class="modal-body">
                <form id="staffModalForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalStaffFirstName">First Name *</label>
                            <input type="text" id="modalStaffFirstName" required placeholder="John">
                        </div>
                        <div class="form-group">
                            <label for="modalStaffLastName">Last Name *</label>
                            <input type="text" id="modalStaffLastName" required placeholder="Doe">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modalStaffSpecialty">Specialty *</label>
                        <input type="text" id="modalStaffSpecialty" required placeholder="Hair Stylist">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="modalStaffEmail">Email *</label>
                            <input type="email" id="modalStaffEmail" required placeholder="john@example.com">
                        </div>
                        <div class="form-group">
                            <label for="modalStaffPhone">Phone *</label>
                            <input type="tel" id="modalStaffPhone" required placeholder="555-1234">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modalStaffBio">Bio</label>
                        <textarea id="modalStaffBio" rows="3" placeholder="Brief professional background..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" id="cancelStaff">Cancel</button>
                <button type="button" class="btn btn-save" id="saveStaffBtn">Save Staff</button>
            </div>
        </div>
    </div>

    <!-- Add Photo Modal -->
    <div id="addPhotoModal" class="admin-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-camera"></i> Add Customer Photo</h3>
                <button class="modal-close" id="closePhoto">&times;</button>
            </div>
            <div class="modal-body">
                <form id="photoModalForm">
                    <div class="form-group">
                        <label for="modalPhotoTitle">Name *</label>
                        <input type="text" id="modalPhotoTitle" required placeholder="e.g., John Doe">
                    </div>
                    <div class="form-group">
                        <label for="modalPhotoCategory">Category *</label>
                        <select id="modalPhotoCategory" required>
                            <option value="">Select category</option>
                            <option value="hair">Hair Services</option>
                            <option value="facial">Facial Services</option>
                            <option value="special">Special (Wedding/Fashion)</option>
                            <option value="others">Other Services</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalPhotoDescription">Description</label>
                        <textarea id="modalPhotoDescription" rows="2" placeholder="Optional description..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="modalMediaType">Media Type *</label>
                        <select id="modalMediaType" required>
                            <option value="image">Photo</option>
                            <option value="video">Video</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalPhotoImage">Upload Media *</label>
                        <input type="file" id="modalPhotoImage" accept="image/*,video/*" required>
                        <small style="color: rgba(255,255,255,0.6); display: block; margin-top: 8px;">
                            <i class="fas fa-info-circle"></i> Supported: Images (JPG, PNG, GIF) & Videos (MP4, WebM)
                        </small>
                    </div>
                    <div id="photoPreview" style="display: none; margin-top: 15px;">
                        <img id="previewImage" style="max-width: 100%; border-radius: 10px; display: none;" />
                        <video id="previewVideo" controls style="max-width: 100%; border-radius: 10px; display: none;"></video>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" id="cancelPhoto">Cancel</button>
                <button type="button" class="btn btn-save" id="savePhotoBtn">Save Photo</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK (Required for authentication) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="js/firebase-config.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/admin.js"></script>
    <script>
      // Check authentication on page load
      (async function() {
        await AuthSystem.checkAuth();
        
        // Display owner info in header
        const currentUser = await AuthSystem.getCurrentUser();
        if (currentUser && currentUser.role === 'owner') {
          const headerContent = document.querySelector('.admin-header-content h1');
          headerContent.innerHTML = '<i class="fas fa-cog"></i> Admin Panel - Welcome, ' + currentUser.name;
        }
      })();
    </script>
</body>
</html>
